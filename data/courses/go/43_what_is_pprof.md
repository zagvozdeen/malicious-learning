---
name: Что такое pprof и для чего это нужно?
module: Теория
tags:
  - грейды
---
**17 грейд**

Слышал/где-то читал, что это нужно для того, чтобы снять профили.

**18 грейд**

Может назвать как позапускать, какие флаги есть у консольной команды. Есть реальный опыт работы, может привести пример из реальной жизни.

**19 грейд**

Может на практике рассказать, что он видит на подготовленных картинках.
НУЖНО ДОБАВИТЬ ПРИМЕР ГРАФА и ФЛЕЙМГРАФА

**20 грейд**

Может рассказать как работает семплирующий профайлер: Профайлер сохраняет не
каждое событие, а каждое N-ное. В случае CPU-профайлера это значит, что стектрейсы.
Может рассказать почему при получении профиля по heap/alloc - это происходит
мгновенно, а для CPU нужно подождать какое-то время.

**21 грейд**

Может рассказать что здесь происходит.
[https://www.ardanlabs.com/blog/2018/12/garbage-collection-in-go-part1-semantics.html](https://www.ardanlabs.com/blog/2018/12/garbage-collection-in-go-part1-semantics.html)

**Дополнительные вопросы**

Q: Как можно снять профили?
A: Можно снимать профили, используя программный API, либо подключив пакет `net/http/pprof`.

Q: Что такое семплирующий профайлер?
A: Профайлер сохраняет не каждое событие, а каждое N-ное. В случае CPU-профайлера это значит, что стектрейсы.

Q: Есть ли оверхед от использования pprof?
A: Для профилей heap, alloc, mutex, block - оверхед минимальный, по сути эти данные собираются всегда. CPU собирается только по требования и явно добавляет оверхед, конкретные значения нужно замерять для конкретного приложения.

Q: Что такое trace и чем он отличается от других профилей?
A: Trace предоставляет очень подробную информацию о выполнении приложений:

- создание / блокировка / разблокировка горутин
- syscalls
- работа GC
- размер heap, количество тредов и горутин

Так как trace очень подробная штука, то он добавляет больше оверхеда, чем остальные профили.

Q: Показать картинку с флеймграфом и попросить рассказать он там видит.
