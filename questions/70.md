---
question: Используется модель деревьев решений на одних и тех же данных. В одном случае вы использовали просто порядковое кодирование для числовых признаков, а во втором целевое кодирование. Объясните почему получаются именно такие значимости признаков
module: Практика
---

Думаю, здесь имеется в виду различное кодирование **категориальных** признаков (хотя сказано "для числовых", вероятно оговорка). При **порядковом кодировании** категорий (присвоении условных чисел типа 1, 2, 3 разным значениям) дерево решений могло неверно интерпретировать эти числа. Оно воспринимает их как имеющие порядок и расстояние - например, категория с кодом 3 считается "больше", чем с кодом 1. Если эти коды не отражали реального влияния на целевую, разбиения дерева могли быть неинформативными. В результате признак мог получить низкую важность, либо важность распределилась странно: дерево, возможно, разделяло датасет не по самим категориям, а по их условным числам (что не совсем правильно). Таким образом, **при простом порядковом кодировании** важность категориального признака может быть занижена или непоказательна, потому что кодировка не несёт настоящей информации о целевом признаке.

Во втором случае вы использовали **целевое кодирование** (target encoding), то есть заменили категориальные значения на некоторые числовые признаки, рассчитанные с использованием целевой переменной (например, среднее значение целевой по каждой категории). Такое кодирование уже **включает информацию о целевой переменной** в сами значения признака. Дерево решений, получив такой признак, сразу "видит" сильную корреляцию: по сути, каждая категория получила число, непосредственно связанное с вероятностью положительного исхода. Поэтому дерево могло почти напрямую использовать этот признак для разделения, что резко увеличило его значимость. Проще говоря, при target encoding признак стал очень предсказательным, и модель посчитала его одним из самых важных (или самым важным) для решения, так как он уже "подсказывает" целевое значение.

Итого: **разные кодировки изменили информационность признака**. Порядковая кодировка не несла полезного сигнала о целевом - дерево не смогло эффективно ей воспользоваться (значимость низкая). Целевое кодирование, напротив, внесло в признак знание о целевом распределении - дерево мгновенно это подхватило, отсюда высокая значимость. Это демонстрирует, как способ кодирования категориальных переменных влияет на работу модели и расчёт значимости признаков.
